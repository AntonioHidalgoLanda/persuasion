<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Machine Dream</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- Styles -->
        <link rel="stylesheet" type="text/css" href="/styles/map.css">
        <!-- Libraries-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="http://d3js.org/d3.v2.min.js?2.9.3"></script>
        <!-- Core Components https://cdn.jsdelivr.net/gh/user/repo@master/file-->
        <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/AntonioHidalgoLanda/jssimpleruleengine@v1.7/JSObjects/rule.min.js"></script>
        <!-- JS Objects -->
        <script type="text/javascript" src="JSObjects/action.js"></script>
        <script type="text/javascript" src="JSObjects/inhabitant.js"></script>
        <script type="text/javascript" src="JSObjects/room.js"></script>
        <script type="text/javascript" src="JSObjects/inference.js"></script>
        <script type="text/javascript" src="JSObjects/goal.js"></script>
        <!-- View -->
        <script type="text/javascript" src="JSView/baseView.js"></script>
        <script type="text/javascript" src="JSView/mapView.js"></script>
        <!-- Tesitng -->
        <script type="text/javascript" src="tests/testActions.js"></script>
        <script type="text/javascript" src="tests/testGoals.js"></script>
    </head>
    <body>
        <div id="gui-room-div">
            Loading...
        </div>
    </body>
    <script type="text/javascript">
        
        // Entities
        var actions = {};
        var fact = {};
        fact.PATH_true_love = {"pathName": "true_love", "id": "true_love"};
        fact.PATH_investing_startup_X = {"pathName": "investing_startup_X", "id": "investing_startup_X"};
        
        fact.RS0_mainchar_000 = Inhabitant.createLeader();
        fact.RS0_mainchar_000.textName = "Me";

        fact.RS0_inhabitant_000 = new Inhabitant();
        fact.RS0_inhabitant_001 = new Inhabitant();

        fact.RS0_action_000B = new Action();
        actions.RS0_action_000B = fact.RS0_action_000B;
        actions.RS0_action_000B.id = "proffesional";
        fact.RS0_action_000O = new Action(0);
        actions.RS0_action_000O = fact.RS0_action_000O;
        actions.RS0_action_000O.id = "novice";
        fact.RS0_action_001O = new Action(0, 0);
        actions.RS0_action_001O = fact.RS0_action_001O;
        actions.RS0_action_001O.id = "public";
        actions.PATH_true_love = fact.PATH_true_love;
        actions.PATH_investing_startup_X = fact.PATH_investing_startup_X;
        
        
        
        fact.RS0_inhabitant_001.textName = "Unknown Person";
        fact.RS0_inhabitant_001.imageUri = "img/avatar1.png";
        
        var room = new Room();
        room.textName = "Generic Room";
        room.dreamNeighbouhood();
        room.enterGroup(fact);
        room.pathEntry = fact.PATH_investing_startup_X.pathName;
        //console.log("room");
        //console.log(room);
        
        // Visualization
        /*
        var viewInhabitant = new BaseView("gui-rules-div", fact.RS0_mainchar_000, actions);
        viewInhabitant.setViewee(fact.RS0_inhabitant_001);
        */
        var viewRoom = new BaseView("gui-room-div", fact.RS0_mainchar_000, actions);
        viewRoom.setViewee(room);
        
        
        // Behaviours
        /*
        Every 10 seconds or anytime that butoon turn is hit
        // INITIALIZE
        var ruleset = {};
        Object.assign(ruleset, Room.ruleSet);
        Object.assign(ruleset, Inhabitant.ruleSet);
        for (factid in test_facts) {
            if (test_facts.hasOwnProperty(factid) && test_facts[factid] instanceof Inhabitant) {
                test_facts[factid].goals = {};
                // random goal
                // create goals
                test_facts[factid].goals.followers = new Goal();
                
                test_facts[factid].goals.followers.updateRatting(Inhabitant.ruleSet.persuade, {"L": test_facts[factid]}, feedback);
                test_facts[factid].goals.followers.updateRatting(Room.ruleSet.go, {"L": test_facts[factid]}, feedback);
                test_facts[factid].goals.followers.updateRatting(Room.ruleSet.work, {"L": test_facts[factid]}, feedback);
            }
        }
        
        Every 10 seconds or anytime that butoon turn is hit
        // TURN
        for (factid in test_facts) {
            if (test_facts.hasOwnProperty(factid) && test_facts[factid] instanceof Inhabitant) {
            
                // find all goals
                
                test_facts.self = test_facts[factid];
                test_facts[factid].goals.followers.resolve(ruleset, test_facts, {"L": test_facts[factid]});
                delete test_facts.self;

            }
        }
        */
        
        
        
    </script>
</html>
